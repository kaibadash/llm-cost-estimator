"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[275],{7275:(e,t,n)=>{n.d(t,{sF:()=>o});var r=n(7719),l=Object.defineProperty,s=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){for(let[t,n]of(this.patStr=e.pat_str,Object.entries(e.bpe_ranks.split("\n").filter(Boolean).reduce((e,t)=>{let[n,r,...l]=t.split(" "),s=Number.parseInt(r,10);return l.forEach((t,n)=>e[t]=s+n),e},{})))){let e=r.toByteArray(t);this.rankMap.set(e.join(","),n),this.textMap.set(n,e)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((e,[t,n])=>(e[n]=this.textEncoder.encode(t),e),{})}encode(e,t=[],n="all"){let r=RegExp(this.patStr,"ug"),l=a.specialTokenRegex(Object.keys(this.specialTokens)),s=[],o=new Set("all"===t?Object.keys(this.specialTokens):t),i=new Set("all"===n?Object.keys(this.specialTokens).filter(e=>!o.has(e)):n);if(i.size>0){let t=a.specialTokenRegex([...i]),n=e.match(t);if(null!=n)throw Error(`The text contains a special token that is not allowed: ${n[0]}`)}let c=0;for(;;){let t=null,n=c;for(;l.lastIndex=n,!(null==(t=l.exec(e))||o.has(t[0]));)n=t.index+1;let a=t?.index??e.length;for(let t of e.substring(c,a).matchAll(r)){let e=this.textEncoder.encode(t[0]),n=this.rankMap.get(e.join(","));if(null!=n){s.push(n);continue}s.push(...function(e,t){return 1===e.length?[t.get(e.join(","))]:(function(e,t){let n=Array.from({length:e.length},(e,t)=>({start:t,end:t+1}));for(;n.length>1;){let r=null;for(let l=0;l<n.length-1;l++){let s=e.slice(n[l].start,n[l+1].end),a=t.get(s.join(","));null!=a&&(null==r||a<r[0])&&(r=[a,l])}if(null!=r){let e=r[1];n[e]={start:n[e].start,end:n[e+1].end},n.splice(e+1,1)}else break}return n})(e,t).map(n=>t.get(e.slice(n.start,n.end).join(","))).filter(e=>null!=e)}(e,this.rankMap))}if(null==t)break;let i=this.specialTokens[t[0]];s.push(i),c=t.index+t[0].length}return s}decode(e){let t=[],n=0;for(let r=0;r<e.length;++r){let l=e[r],s=this.textMap.get(l)??this.inverseSpecialTokens[l];null!=s&&(t.push(s),n+=s.length)}let r=new Uint8Array(n),l=0;for(let e of t)r.set(e,l),l+=e.length;return this.textDecoder.decode(r)}},o=a;((e,t,n)=>s(e,"symbol"!=typeof t?t+"":t,n))(o,"specialTokenRegex",e=>RegExp(e.map(e=>e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")).join("|"),"g"))},7719:(e,t)=>{t.byteLength=function(e){var t=i(e),n=t[0],r=t[1];return(n+r)*3/4-r},t.toByteArray=function(e){var t,n,s=i(e),a=s[0],o=s[1],c=new l((a+o)*3/4-o),h=0,p=o>0?a-4:a;for(n=0;n<p;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[h++]=t>>16&255,c[h++]=t>>8&255,c[h++]=255&t;return 2===o&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[h++]=255&t),1===o&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[h++]=t>>8&255,c[h++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,l=r%3,s=[],a=0,o=r-l;a<o;a+=16383)s.push(function(e,t,r){for(var l,s=[],a=t;a<r;a+=3)l=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[l>>18&63]+n[l>>12&63]+n[l>>6&63]+n[63&l]);return s.join("")}(e,a,a+16383>o?o:a+16383));return 1===l?s.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===l&&s.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")};for(var n=[],r=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=s.length;a<o;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function i(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}r[45]=62,r[95]=63}}]);